(this.webpackJsonptickertracker=this.webpackJsonptickertracker||[]).push([[0],{268:function(e,t,n){},514:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Xe}));var c=n(0),s=n.n(c),r=n(54),a=n.n(r),o=n(86),i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return!0;case"SIGN_OUT":return!1;default:return e}},l=n(85),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW_STOCK":return e.includes(t.symbol)?e:[].concat(Object(l.a)(e),[t.symbol]);case"UNFOLLOW_STOCK":return e.filter((function(e){return e!==t.symbol}));case"TOGGLE_STOCK":return e.includes(t.symbol)?e.filter((function(e){return e!==t.symbol})):[].concat(Object(l.a)(e),[t.symbol]);case"SET_FOLLOWED_STOCKS":return t.symbols;default:return e}},u=n(22),j={loading:!1,stocks:[],error:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRENDING_STOCKS_STARTED":return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case"TRENDING_STOCKS_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,stocks:t.payload.stocks,error:null});case"TRENDING_STOCKS_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload.error});default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)({},e);switch(t.type){case"STOCK_INFO_STARTED":return n[t.symbol]={},n[t.symbol].loading=!0,n;case"STOCK_INFO_SUCCESS":return n[t.symbol]={},n[t.symbol].data=t.payload,n[t.symbol].loading=!1,n;case"STOCK_INFO_FAILURE":return n[t.symbol]={},n[t.symbol].error=t.error,n;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)({},e);switch(t.type){case"STOCK_HISTORY_STARTED":return n[t.symbol]={},n[t.symbol].loading=!0,n;case"STOCK_HISTORY_SUCCESS":return n[t.symbol]={},n[t.symbol].data=t.payload,n[t.symbol].loading=!1,n;case"STOCK_HISTORY_FAILURE":return n[t.symbol]={},n[t.symbol].error=t.error,n;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)({},e);switch(t.type){case"TRENDING_POSTS_STARTED":return n[t.symbol]={},n[t.symbol].loading=!0,n;case"TRENDING_POSTS_SUCCESS":return n[t.symbol]={},n[t.symbol].data=t.payload,n[t.symbol].loading=!1,n;case"TRENDING_POSTS_FAILURE":return n[t.symbol]={},n[t.symbol].error=t.error,n;default:return e}},m=Object(o.b)({isLogged:i,followedStocks:d,trendingStocks:b,stockInfo:O,stockHistory:h,trendingPosts:f}),p=n(17),g=n(25);n(517),n(266),n(516);g.a.initializeApp({apiKey:"AIzaSyD0dwEZgt9bAUm5I2laXXMjTS-xb8ef-I0",authDomain:"iprog-projekt-6d4e8.firebaseapp.com",projectId:"iprog-projekt-6d4e8",storageBucket:"iprog-projekt-6d4e8.appspot.com",messagingSenderId:"253433507815",appId:"1:253433507815:web:a0b0e57d54e9ed0c22d742",measurementId:"G-2LSYJ55LW9"});var x=g.a.firestore(),v=(g.a.analytics(),x),y=n(227),S=(n(268),n(5)),k=n(45),N=n(21),C=function(e){return{type:"SET_FOLLOWED_STOCKS",symbols:e}},w=function(e,t){return{type:e+"_STARTED",symbol:t}},E=function(e,t,n){return{type:e+"_SUCCESS",symbol:t,payload:Object(u.a)({},n)}},T=function(e,t,n){return{type:e+"_FAILURE",symbol:t,payload:{error:n}}},L=function(e){return function(t,n){e.forEach((function(e){e in n().stockInfo||(t(w("STOCK_INFO",e)),v.doc("stockInformation/".concat(e)).get().then((function(n){t(E("STOCK_INFO",e,n.data()))})).catch((function(n){t(T("STOCK_INFO",e,n))})))}))}},_=n.p+"static/media/bookmark-filled.f766e32e.svg",D=n.p+"static/media/bookmark.ec573fbf.svg",I=n(2),R=function(e){return Object(I.jsx)("img",{alt:"Follow",src:e.followedStocks.includes(e.symbol)?_:D,className:"bookmark",onClick:e.followStock})},F=function(e){var t=Object(p.c)((function(e){return e.followedStocks})),n=Object(p.c)((function(e){return e.isLogged})),c=Object(p.b)();return Object(I.jsx)(I.Fragment,{children:n&&Object(I.jsx)(R,{symbol:e.symbol,followedStocks:t,followStock:function(){return c({type:"TOGGLE_STOCK",symbol:e.symbol})}})})},P=n(69),A=n.n(P),K=n(519),U=n(520),M=n(524),G=n(251),B=n(243),W=n(244),Y=n(103),H=n(125),z=function(e){return A()(e).format("D MMM YY")},J=function(e){var t,n;return Object(I.jsx)("div",{className:"customTooltip",children:(null===e||void 0===e?void 0:e.payload)&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{children:z(null===e||void 0===e||null===(t=e.payload[0])||void 0===t?void 0:t.payload.x)}),Object(I.jsx)("p",{children:null===e||void 0===e||null===(n=e.payload[0])||void 0===n?void 0:n.payload.y.toFixed(2)})]})})},X=function(e){var t=s.a.useState(0),n=Object(S.a)(t,2),c=n[0],r=n[1],a=function(t,n){return r(function(e,t){for(var n=Math.abs(e[0].x-t),c=0,s=0;s<e.length;s++){var r=Math.abs(e[s].x-t);r<n&&(c=s,n=r)}return c}(e.historicalData,A()(new Date).subtract(t,n).toDate()))};return Object(I.jsxs)("div",{id:"graph",children:[Object(I.jsx)(K.a,{width:"100%",height:400,children:Object(I.jsxs)(U.a,{data:e.historicalData,children:[Object(I.jsx)(M.a,{stroke:"#2A2C4A"}),Object(I.jsx)(G.a,{type:"monotone",dataKey:"y",stroke:"#6CCC57",dot:!1}),Object(I.jsx)(B.a,{stroke:"#6D80BE",tickFormatter:z,dataKey:"x",tick:{fontSize:11},children:" "}),Object(I.jsx)(W.a,{stroke:"#6D80BE",tick:{fontSize:11}}),Object(I.jsx)(Y.a,{cursor:!1,wrapperStyle:{width:100,color:"#6D80BE"},content:J}),Object(I.jsx)(H.a,{height:30,stroke:"#6D80BE",startIndex:c,tickFormatter:function(e){return""},dataKey:"x",tick:{fontSize:11}})]},c)}),Object(I.jsxs)("div",{className:"controls",children:[Object(I.jsx)("button",{onClick:function(){return a(1,"week")},children:"1W"}),Object(I.jsx)("button",{onClick:function(){return a(1,"month")},children:"1M"}),Object(I.jsx)("button",{onClick:function(){return a(6,"month")},children:"6M"}),Object(I.jsx)("button",{onClick:function(){return a(1,"year")},children:"1Y"}),Object(I.jsx)("button",{onClick:function(){return a(3,"year")},children:"3Y"}),Object(I.jsx)("button",{onClick:function(){return a(10,"year")},children:"MAX"})]})]})},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((e=new Number(e))===1/0)return"\u221e";var c,s=["","k","M","B","T"],r=Math.floor(Math.log10(Math.abs(e))/3);return r=r>4?4:r,c=e<1||0===r?n?Math.round(e):e.toFixed(t):(e/Math.pow(10,3*r)).toFixed(t)+s[r],new String(c)},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return e?t:"N/A"},$=function(e){var t,n,c;return Object(I.jsxs)("div",{id:"stockdata",children:[Object(I.jsx)("h2",{className:"title",children:"Stock Summary"}),Object(I.jsxs)("div",{className:"datatable",children:[Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Today's Range"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.dayrange)})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Close"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.price)})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Previous Close"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.prevClose)})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Market Cap"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.marketCap,V(e.info.marketCap,2,!0))})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"52-Week Range"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.fiftyTwoWkrange)})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Forward P/E"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.forwardPE)})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Earnings"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.earningsTime,null===(t=e.info.earningsTime)||void 0===t?void 0:t.toDate().toDateString())})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Dividend Date"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.dividendDate,null===(n=e.info.dividendDate)||void 0===n?void 0:n.toDate().toDateString())})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Ex Dividend Date"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.exDividendDate,null===(c=e.info.exDividendDate)||void 0===c?void 0:c.toDate().toDateString())})]})}),Object(I.jsx)("div",{className:"row",children:Object(I.jsxs)("div",{className:"rowContent",children:[Object(I.jsx)("span",{className:"label",children:"Short Percent of Float"}),Object(I.jsx)("span",{className:"value",children:Z(e.info.shortPercentFloat,e.info.shortPercentFloat+"%")})]})})]}),Object(I.jsxs)("p",{style:{fontStyle:"italic"},children:["* Prices are shown in ",e.info.currency,". Last updated ",e.info.priceDate.toDate().toDateString(),".",Object(I.jsx)("br",{}),'** Items marked as "N/A" are currently not accessible from our sources.']})]})},q=function(e){return Object(I.jsxs)("div",{id:"stockinfo",children:[Object(I.jsx)("span",{id:"stockheader",children:Object(I.jsxs)("h1",{className:"title",children:[Object(I.jsx)(F,{symbol:e.info.symbol}),e.info.name," (",e.info.symbol,")"]})}),Object(I.jsx)(X,Object(u.a)({},e)),Object(I.jsx)($,Object(u.a)({},e))]})},Q=n(245),ee=function(e,t){var n=s.a.useState(),c=Object(S.a)(n,2),r=c[0],a=c[1],o=s.a.useState(!0),i=Object(S.a)(o,2),l=i[0],d=i[1],u=s.a.useState(),j=Object(S.a)(u,2),b=j[0],O=j[1];return s.a.useEffect((function(){a(null),d(!0);var n=[],c={};if(e.forEach((function(e){var s;t&&e in t?(null===(s=t[e])||void 0===s?void 0:s.error)?(Object(Q.a)("error"),O("Encountered an error. Please try again later.")):t[e].loading?n.push(!0):t[e].data&&(n.push(!1),c[e]=t[e].data):n.push(!0)})),!b){var s=n.includes(!0);d(s),s||a(c)}}),[e,t]),[r,l,b]},te=function(e){var t=Object(p.c)((function(e){return e.stockHistory})),n=Object(p.b)(),c=ee(e,t),r=Object(S.a)(c,3),a=r[0],o=r[1],i=r[2];return s.a.useEffect((function(){n(function(e){return function(t,n){var c="STOCK_HISTORY";e.forEach((function(e){e in n().stockHistory||(t(w(c,e)),v.doc("priceHistory/".concat(e)).get().then((function(n){t(E(c,e,n.data()))})).catch((function(n){t(T(c,e,n))})))}))}}(e))}),[e]),[a,o,i]},ne=n.p+"static/media/loading.fd28a59c.svg",ce=function(e){var t=Object.entries(e);return(t=t.map((function(e){return[new Date(e[0]),e[1]]}))).sort((function(e,t){return e[0]-t[0]})),t=(t=t.filter((function(e){var t;return null===(t=e[1])||void 0===t?void 0:t.date}))).map((function(e){return{x:e[1].date.toDate(),y:e[1].close}}))},se=function(e){var t=te(e.symbol),n=Object(S.a)(t,3),c=n[0],r=n[1],a=(n[2],function(e){var t=Object(p.c)((function(e){return e.stockInfo})),n=Object(p.b)(),c=ee(e,t),r=Object(S.a)(c,3),a=r[0],o=r[1],i=r[2];return s.a.useEffect((function(){n(L(e))}),[e]),[a,o,i]}(e.symbol)),o=Object(S.a)(a,3),i=o[0],l=o[1],d=(o[2],s.a.useState([])),u=Object(S.a)(d,2),j=u[0],b=u[1];return s.a.useEffect((function(){c&&b(ce(c[e.symbol]))}),[c]),s.a.useEffect((function(){e.setLoading&&e.setLoading(r||l)}),[r,l]),Object(I.jsx)(I.Fragment,{children:!e.loading&&Object(I.jsxs)("div",{id:"stockinfo",children:[(r||l)&&Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:ne})}),i&&c&&i[e.symbol[0]]&&c[e.symbol[0]]&&Object(I.jsx)(q,{info:i[e.symbol[0]],historicalData:j,filterData:function(t,n){return b(function(e,t,n){return e.filter((function(e){return e.x>A()(new Date).subtract(t,n)}))}(ce(c[e.symbol[0]]),t,n))}})]})})},re=n(56),ae=function(e){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(re.a,{trigger:Object(I.jsx)("button",{className:"info-button",children:"?"}),on:["hover","focus"],position:"right top",closeOnDocumentClick:!0,className:"info",children:e.content})})},oe=function(e){return Object(I.jsxs)("span",{className:"priceChange ".concat(e>0?"priceUp":"priceDown"),children:[V(100*new Number(e),2),"%"]})},ie=function(e){return Object(I.jsxs)("div",{id:"sidebar",children:[Object(I.jsxs)("div",{id:"trending",children:[Object(I.jsxs)("span",{id:"trendingheader",children:[Object(I.jsx)("h4",{children:"Trending"}),Object(I.jsx)(ae,{content:Object(I.jsx)("span",{children:"The trend score is based on the amount of mentions of a particular symbol across a multitude of subreddits."})})]}),Object(I.jsxs)("span",{className:"title stockSidebar",children:[Object(I.jsx)("h5",{className:"ticker",style:{cursor:"auto"},children:"Symbol"}),Object(I.jsx)("h5",{className:"priceChange",children:"Price"}),Object(I.jsx)("h5",{className:"trendChange",children:"Trend"})]}),e.trending.map((function(e){return Object(I.jsxs)("span",{className:"stockSidebar",children:[Object(I.jsx)(F,{symbol:e.symbol}),Object(I.jsx)(k.Link,{className:"ticker",to:"/stock/".concat(e.symbol),children:e.symbol}),oe(e.priceChange),(t=e.trend,n=e.trendChange,Object(I.jsx)("span",{className:"trendChange ".concat(n>0?"trendUp":"trendDown"),children:V(100*new Number(t),2)}))]},e.symbol);var t,n}))]}),e.isLogged&&Object(I.jsxs)("div",{id:"watchlist",children:[Object(I.jsx)("h4",{children:"Watchlist"}),Object(I.jsxs)("span",{className:"title stockSidebar",children:[Object(I.jsx)("h5",{className:"ticker",style:{cursor:"auto"},children:"Symbol"}),Object(I.jsx)("h5",{className:"priceChange",children:"Price"})]}),e.watchlist.map((function(e){return Object(I.jsxs)("span",{className:"stockSidebar",children:[Object(I.jsx)(F,{symbol:e.symbol}),Object(I.jsx)(k.Link,{className:"ticker",to:"/stock/".concat(e.symbol),children:e.symbol}),oe(e.priceChange)]},e.symbol)}))]})]})},le=function(){var e=s.a.useState(),t=Object(S.a)(e,2),n=t[0],c=t[1],r=s.a.useState(!0),a=Object(S.a)(r,2),o=a[0],i=a[1],l=s.a.useState(),d=Object(S.a)(l,2),u=d[0],j=d[1],b=Object(p.c)((function(e){return e.trendingStocks})),O=Object(p.b)();return s.a.useEffect((function(){O((function(e){var t="TRENDING_STOCKS";e(w(t,"na")),v.doc("popularStocks/top10").get().then((function(n){e(E(t,"na",n.data()))})).catch((function(n){e(T(t,"na",n))}))}))}),[]),s.a.useEffect((function(){b?b.error?j("Could not resolve trending stocks."):b.loading?i(!0):0!=Object.keys(b.stocks)&&(c(b.stocks),i(!1)):i(!0)}),[b]),[n,o,u]},de=function(e){var t=le(),n=Object(S.a)(t,3),c=n[0],r=n[1],a=n[2],o=function(){var e=Object(p.c)((function(e){return e.followedStocks})),t=Object(p.c)((function(e){return e.stockInfo})),n=s.a.useState([]),c=Object(S.a)(n,2),r=c[0],a=c[1],o=Object(p.b)();return s.a.useEffect((function(){o(L(e))}),[e]),s.a.useEffect((function(){var n=[];Object.entries(t).forEach((function(t){var c=Object(S.a)(t,2),s=c[0],r=c[1];!r.loading&&r.data&&e.includes(s)&&n.push(Object(u.a)(Object(u.a)({},r.data),{},{priceChange:(r.data.price-r.data.prevClose)/r.data.prevClose}))})),a(n)}),[t,e]),r}(),i=Object(p.c)((function(e){return e.isLogged}));return Object(I.jsxs)("div",{id:"sidebarContainer",children:[r&&Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:ne})}),c&&Object(I.jsx)(ie,{isLogged:i,trending:c,watchlist:o.sort((function(e,t){return e.priceChange<t.priceChange}))}),a&&Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:ne})})]})},ue=function(e){return Object(I.jsx)("input",{type:"text",placeholder:"Search stock",id:"search-field",value:e.keyword,onChange:function(t){return e.setKeyword(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&(document.getElementById("search-field").blur(),e.goToTopResult())}})},je=n(45).Link,be=function(e){return Object(I.jsxs)("div",{id:"searchResults",children:[e.results.map((function(e){var t=Object(S.a)(e,2),n=t[0],c=t[1];return Object(I.jsxs)(je,{to:"/stock/".concat(n),className:"searchResult",children:[Object(I.jsxs)("span",{className:"symbol",children:[n,": "]}),Object(I.jsx)("span",{className:"name",children:c})]},n)})),e.results.length<1&&Object(I.jsx)("span",{className:"searchResult",children:"Can't find your stock? We currently only support stocks with a $2B+ market cap."})]})},Oe=n.p+"static/media/logo.8e8e68a7.svg",he=n(57),fe=n.n(he),me=n(121),pe=n.p+"static/media/loading_white.c75f25cc.svg",ge=function(e){var t=s.a.useRef(),n=s.a.useRef(),c=s.a.useState(!0),r=Object(S.a)(c,2),a=r[0],o=r[1];return Object(I.jsxs)("div",{className:"sign",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Email address"}),Object(I.jsx)("input",{id:"email",type:"text",ref:t})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Enter password"}),Object(I.jsx)("input",{placeholder:"Password",id:"password",type:"password",ref:n}),e.error&&Object(I.jsx)("span",{className:"error",children:e.error}),!e.error&&Object(I.jsx)("span",{children:"\xa0"})]}),Object(I.jsxs)("div",{className:"buttonfield",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("input",{type:"checkbox",className:"remember",checked:a,onChange:function(){return o((function(e){return!e}))}}),"Remember Me"]}),Object(I.jsx)("button",{onClick:function(){var c,s;return e.signin(null===(c=t.current)||void 0===c?void 0:c.value,null===(s=n.current)||void 0===s?void 0:s.value,a)},children:e.load?Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:pe})}):"Log In"})]}),Object(I.jsxs)("span",{children:["New to Tickertracker? ",Object(I.jsx)("a",{className:"link",onClick:e.openSignup,children:"Sign Up"})]})]})},xe=function(){var e=Object(me.a)(fe.a.mark((function e(t,n,c){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=17;break}if(e.prev=1,!c){e.next=7;break}return e.next=5,g.a.auth().setPersistence(g.a.auth.Auth.Persistence.LOCAL);case 5:e.next=9;break;case 7:return e.next=9,g.a.auth().setPersistence(g.a.auth.Auth.Persistence.SESSION);case 9:return e.next=11,g.a.auth().signInWithEmailAndPassword(t,n);case 11:return e.abrupt("return",{success:!0});case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",{success:!1,err:e.t0});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n,c){return e.apply(this,arguments)}}(),ve=function(e){var t=s.a.useState(),n=Object(S.a)(t,2),c=n[0],r=n[1],a=s.a.useState(!1),o=Object(S.a)(a,2),i=o[0],l=o[1];return Object(I.jsx)(ge,{signin:function(t,n,c){return function(t,n,c){l(!0),xe(t,n,c).then((function(t){l(!1),t.success?e.close():r(t.err.message)})).catch((function(e){l(!1)}))}(t,n,c)},load:i,error:c,openSignup:function(){e.close(),e.openSignup()}})},ye=function(e){var t=s.a.useRef(),n=s.a.useState(),c=Object(S.a)(n,2),r=c[0],a=c[1],o=s.a.useState(),i=Object(S.a)(o,2),l=i[0],d=i[1],u=s.a.useState(!0),j=Object(S.a)(u,2),b=j[0],O=j[1];return s.a.useEffect((function(){r!==l?e.setErr("Passwords must match."):e.setErr()}),[r,l]),Object(I.jsxs)("div",{className:"sign",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Email address"}),Object(I.jsx)("input",{id:"email",type:"text",placeholder:"keith.gill@tickertracker.com",ref:t})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Create password"}),Object(I.jsx)("input",{placeholder:"At least 6 characters",id:"password",type:"password",onInput:function(e){return a(e.target.value)}}),Object(I.jsx)("input",{placeholder:"Confirm password",type:"password",onInput:function(e){return d(e.target.value)}}),e.error&&Object(I.jsx)("span",{className:"error",children:e.error}),!e.error&&Object(I.jsx)("span",{children:"\xa0"})]}),Object(I.jsxs)("div",{className:"buttonfield",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("input",{type:"checkbox",className:"remember",checked:b,onChange:function(){return O((function(e){return!e}))}}),"Remember Me"]}),Object(I.jsx)("button",{onClick:function(){var n;r===l&&e.signup(null===(n=t.current)||void 0===n?void 0:n.value,r,b)},children:e.load?Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:pe})}):"Sign Up"})]}),Object(I.jsxs)("span",{children:["Already have an account? ",Object(I.jsx)("a",{className:"link",onClick:e.openLogin,children:"Log In"})]})]})},Se=function(){var e=Object(me.a)(fe.a.mark((function e(t,n,c){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=17;break}if(e.prev=1,!c){e.next=7;break}return e.next=5,g.a.auth().setPersistence(g.a.auth.Auth.Persistence.LOCAL);case 5:e.next=9;break;case 7:return e.next=9,g.a.auth().setPersistence(g.a.auth.Auth.Persistence.SESSION);case 9:return e.next=11,g.a.auth().createUserWithEmailAndPassword(t,n);case 11:return e.abrupt("return",{success:!0});case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",{success:!1,err:e.t0});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n,c){return e.apply(this,arguments)}}(),ke=function(e){var t=s.a.useState(),n=Object(S.a)(t,2),c=n[0],r=n[1],a=s.a.useState(!1),o=Object(S.a)(a,2),i=o[0],l=o[1];return Object(I.jsx)(ye,{signup:function(t,n,c){return function(t,n,c){l(!0),Se(t,n,c).then((function(t){l(!1),t.success?e.close():r(t.err.message)})).catch((function(e){l(!1)}))}(t,n,c)},load:i,error:c,setErr:r,openLogin:function(){e.close(),e.openLogin()}})},Ne=function(e){var t=s.a.useRef(),n=function(){var e;return null===(e=t.current)||void 0===e?void 0:e.open()},c=function(){var e;return null===(e=t.current)||void 0===e?void 0:e.close()},r=s.a.useRef(),a=function(){var e;return null===(e=r.current)||void 0===e?void 0:e.open()},o=function(){var e;return null===(e=r.current)||void 0===e?void 0:e.close()};return Object(I.jsxs)("div",{id:"header",children:[Object(I.jsx)(k.Link,{to:"/",children:Object(I.jsx)("img",{src:Oe,id:"logo"})}),Object(I.jsxs)("div",{id:"searchbar",children:[Object(I.jsx)(ue,{keyword:e.keyword,setKeyword:e.setKeyword,goToTopResult:e.goToTopResult}),Object(I.jsx)(be,{results:e.results})]}),!e.isLogged&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("button",{type:"button",id:"login-button",onClick:n,children:"Log In"}),Object(I.jsx)("button",{type:"button",id:"signup-button",onClick:a,children:"Sign Up"}),Object(I.jsxs)(re.b,{ref:t,closeOnDocumentClick:!0,className:"login",children:[Object(I.jsx)("a",{className:"close",onClick:c,children:"\xd7"}),Object(I.jsx)(ve,{close:c,openSignup:a})]}),Object(I.jsxs)(re.b,{ref:r,closeOnDocumentClick:!0,className:"login",children:[Object(I.jsx)("a",{className:"close",onClick:o,children:"\xd7"}),Object(I.jsx)(ke,{close:o,openLogin:n})]})]}),e.isLogged&&Object(I.jsx)("button",{type:"button",id:"logout-button",onClick:e.logOut,children:"Log Out"})]})},Ce=n(246),we=function(e,t){return t=t||"",(e=e||"").toLowerCase().includes(t.toLowerCase())},Ee=function(){g.a.auth().signOut()},Te=function(e){var t=s.a.useState(""),n=Object(S.a)(t,2),c=n[0],r=n[1],a=s.a.useState([]),o=Object(S.a)(a,2),i=o[0],l=o[1],d=Object(Ce.a)(v.doc("availableStocks/all")),u=Object(S.a)(d,3),j=u[0],b=(u[1],u[2],s.a.useState([])),O=Object(S.a)(b,2),h=O[0],f=O[1],m=s.a.useState(""),g=Object(S.a)(m,2),x=g[0],y=g[1],k=Object(p.c)((function(e){return e.isLogged})),C=Object(N.k)();return s.a.useEffect((function(){var e=i.filter((function(e){return we(e[0],c)||we(e[1],c)})).slice(0,5);f(e),e&&e[0]&&e[0][0]&&y(e[0][0])}),[c,i]),s.a.useEffect((function(){j&&l(function(e){var t=[];return Object.entries(e).forEach((function(e){t.push([e[1].symbol,e[1].name])})),t}(j.data()))}),[j]),Object(I.jsx)(Ne,{keyword:c,setKeyword:r,results:h,goToTopResult:function(){return C.push("/stock/".concat(x))},isLogged:k,logOut:Ee})},Le=n(247),_e=n.n(Le),De=n(249),Ie=function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("img",{alt:e.caption,src:e.url}),Object(I.jsx)("span",{children:e.caption})]})},Re=function(e){var t,n,c=e.body.split(/\r?\n/);return c=c.map((function(e,t){return function(e){return e.match(/http[s]?:\/\/preview.redd.it/g)&&!e.match(/\[.*\]\(.*\)/g)}(e)?Object(I.jsx)("img",{alt:"",className:"inline-image",src:e},t):Object(I.jsx)(_e.a,{children:e},t)})),Object(I.jsxs)("div",{className:"post",ref:e.lastElement,children:[Object(I.jsxs)("a",{href:e.redditlink,className:"originalLink",target:"_blank",rel:"noreferrer",children:[Object(I.jsx)("span",{className:"infoSR",children:e.subreddit}),Object(I.jsxs)("span",{className:"info",children:[" \u2022 ",e.author," \u2022 ",V(e.score,1,!0)," points \u2022 ",A()(e.date.toDate()).fromNow()]})]}),Object(I.jsx)("h2",{children:e.title}),c,"image"===e.post_hint&&Object(I.jsx)("img",{alt:"",className:"inline-image",src:e.postedlink}),"link"===e.post_hint&&Object(I.jsx)("a",{href:e.postedlink,children:e.postedlink}),"hosted:video"===e.post_hint&&Object(I.jsx)("video",{src:e.media.reddit_video.fallback_url,controls:!0}),"rich:video"===e.post_hint&&"YouTube"===(null===(t=e.media)||void 0===t?void 0:t.oembed.provider_name)&&Object(I.jsx)("div",{className:"videoContainer",children:Object(I.jsx)("iframe",{className:"video",src:"https://www.youtube.com/embed/"+(n=e.postedlink,/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/gi.exec(n)[1]),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.is_gallery&&Object(I.jsx)(De.a,{children:e.gallery_data.items.map((function(t){return Object(I.jsx)(Ie,{url:e.media_metadata[t.media_id].s.u,caption:t.caption},t.id)}))})]})},Fe=function(e){var t=Object(p.c)((function(e){return e.trendingPosts})),n=s.a.useState([]),c=Object(S.a)(n,2),r=c[0],a=c[1],o=Object(p.b)(),i=ee(e,t),d=Object(S.a)(i,3),u=d[0],j=d[1],b=d[2];return s.a.useEffect((function(){o(function(e){return function(t,n){var c="TRENDING_POSTS";e.forEach((function(e){e in n().trendingPosts||(t(w(c,e)),v.doc("trendingPosts/".concat(e)).get().then((function(n){t(E(c,e,n.data()))})).catch((function(n){t(T(c,e,n))})))}))}}(e))}),[e]),s.a.useEffect((function(){var n=[];e.forEach((function(c){e.includes(c)&&c in t&&t[c].data&&t[c].data.posts&&(n=[].concat(Object(l.a)(n),Object(l.a)(t[c].data.posts)))})),a(n)}),[u]),[r,j,b]},Pe=function(e){var t=Fe(e.symbols),n=Object(S.a)(t,3),c=n[0],r=n[1],a=n[2],o=s.a.useRef(),i=s.a.useRef(),l=s.a.useState([]),d=Object(S.a)(l,2),j=d[0],b=d[1],O=s.a.useState(5),h=Object(S.a)(O,2),f=h[0],m=h[1];s.a.useEffect((function(){e.setLoading&&e.setLoading(r)}),[r]);var p=function(){i.current&&i.current.disconnect(),o.current&&(i.current=new IntersectionObserver((function(e){e[0].isIntersecting&&m((function(e){return e+5}))})),i.current.observe(o.current))};return s.a.useEffect((function(){m(5)}),[e.symbols]),s.a.useEffect((function(){b(c?c.sort((function(e,t){return t.score-e.score})).slice(0,f):[])}),[c,f]),s.a.useEffect((function(){p()}),[j]),Object(I.jsx)(I.Fragment,{children:!e.loading&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("span",{className:"postHeader",children:[Object(I.jsx)("h1",{children:e.title}),Object(I.jsx)(ae,{content:Object(I.jsx)("span",{children:"This content is user-provided and collected from today's 'Hot' posts on Reddit."})})]}),a&&Object(I.jsx)("p",{className:"error",children:"An error occured. Please try again later."}),r&&Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:ne})}),c&&j&&j.map((function(e,t){return Object(I.jsx)(Re,Object(u.a)(Object(u.a)({},e),{},{fillView:p,lastElement:t==f-1?o:null}),e.redditlink)})),Object(I.jsxs)("div",{className:"end",children:[!r&&c&&c.length<=j.length&&Object(I.jsx)("p",{children:"No more posts..."}),!r&&c.length>j.length&&Object(I.jsx)("img",{alt:"Loading...",src:ne})]})]})})},Ae=n.p+"static/media/fire.ccd7d58c.svg",Ke=n.p+"static/media/home.ad6d5146.svg",Ue=n.p+"static/media/login.5913c84c.svg",Me=n.p+"static/media/logout.9445e824.svg",Ge=function(e){var t=s.a.useRef(),n=function(){var e;return null===(e=t.current)||void 0===e?void 0:e.open()},c=function(){var e;return null===(e=t.current)||void 0===e?void 0:e.close()},r=s.a.useRef();return Object(I.jsxs)("div",{id:"mobileNav",children:[Object(I.jsx)("button",{id:"toggleTrending",style:{cursor:"pointer"},onClick:e.toggleTrending,children:Object(I.jsx)("img",{src:Ae})}),Object(I.jsx)(k.Link,{id:"home",to:"/",children:Object(I.jsx)("img",{src:Ke})}),Object(I.jsx)("button",{id:"login",onClick:function(){e.isLogged?e.logOut():n()},style:{cursor:"pointer"},children:Object(I.jsx)("img",{src:e.isLogged?Me:Ue})}),Object(I.jsxs)(re.b,{ref:t,className:"login",closeOnDocumentClick:!0,children:[Object(I.jsx)("a",{className:"close",onClick:c,children:"\xd7"}),Object(I.jsx)(ve,{close:c,openSignup:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.open()}})]}),Object(I.jsxs)(re.b,{ref:r,className:"login",closeOnDocumentClick:!0,children:[Object(I.jsx)("a",{className:"close",onClick:e.closeSignup,children:"\xd7"}),Object(I.jsx)(ke,{close:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.close()},openLogin:n})]})]})},Be=function(){return g.a.auth().signOut()},We=function(e){var t=s.a.useState(!1),n=Object(S.a)(t,2),c=n[0],r=n[1],a=s.a.useState(!1),o=Object(S.a)(a,2),i=o[0],l=o[1],d=Object(N.l)(),u=Object(p.c)((function(e){return e.isLogged}));return s.a.useEffect((function(){return document.getElementById("sidebarContainer").setAttribute("expanded",i.toString())}),[i]),s.a.useEffect((function(){return c?l(!1):r(!0)}),[d]),Object(I.jsx)(Ge,{logOut:Be,isLogged:u,toggleTrending:function(){return l((function(e){return!e}))}})};var Ye=function(e){var t=s.a.useState(!0),n=Object(S.a)(t,2),c=n[0],r=n[1],a=s.a.useState(!0),o=Object(S.a)(a,2),i=o[0],l=o[1],d=Object(N.m)().symbol;return Object(I.jsxs)(I.Fragment,{children:[c&&i&&Object(I.jsx)("div",{className:"loading",children:Object(I.jsx)("img",{alt:"Loading...",src:ne})}),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(se,{loading:c&&i,setLoading:r,symbol:[d.toUpperCase()]}),Object(I.jsx)(Pe,{loading:c&&i,setLoading:l,symbols:[d.toUpperCase()],title:"Posts from Reddit about "+d.toUpperCase()})]})]})},He=function(){var e=Object(p.c)((function(e){return e.isLogged})),t=Object(p.c)((function(e){return e.followedStocks})),n=le(),c=Object(S.a)(n,3),r=c[0],a=(c[1],c[2],s.a.useState([])),o=Object(S.a)(a,2),i=o[0],l=o[1];return s.a.useEffect((function(){r&&r[0]&&l(r.map((function(e){return e.symbol})))}),[r]),Object(I.jsxs)(k.BrowserRouter,{children:[Object(I.jsx)(Te,{}),Object(I.jsx)(de,{}),Object(I.jsx)("div",{id:"mainContentContainer",children:Object(I.jsx)("div",{id:"mainContent",children:Object(I.jsxs)(N.g,{children:[Object(I.jsx)(N.d,{path:"/stock/:symbol",children:Object(I.jsx)(Ye,{})}),Object(I.jsx)(N.d,{path:"/",children:Object(I.jsx)(Pe,{symbols:e?t:i,title:e?"Your Reddit Feed":"Popular Posts from Reddit"})})]})})}),Object(I.jsx)(We,{})]})},ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,Je=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(t){return}}(),Xe=Object(o.d)(m,Je,ze(Object(o.a)(y.a))),Ve=Xe.getState(),Ze=function(){var e=Ve;(Ve=Xe.getState()).followedStocks!=(null===e||void 0===e?void 0:e.followedStocks)&&Ve.isLogged&&v.doc("users/".concat(g.a.auth().currentUser.uid)).set({followedStocks:Ve.followedStocks}),Ve.isLogged!=(null===e||void 0===e?void 0:e.isLogged)&&function(e){try{localStorage.setItem("state",JSON.stringify(e))}catch(t){}}({isLogged:Xe.getState().isLogged})};Xe.subscribe((function(){Ze()})),g.a.auth().onAuthStateChanged((function(e){e?(v.doc("users/".concat(e.uid)).get().then((function(e){var t,n;return Xe.dispatch(C((null===(t=e.data())||void 0===t?void 0:t.followedStocks)?null===(n=e.data())||void 0===n?void 0:n.followedStocks:[]))})),Xe.dispatch({type:"SIGN_IN"})):(Xe.dispatch({type:"SIGN_OUT"}),Xe.dispatch(C([])))})),a.a.render(Object(I.jsx)(p.a,{store:Xe,children:Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(He,{})})}),document.getElementById("root"))}},[[514,1,2]]]);
//# sourceMappingURL=main.6d748b84.chunk.js.map